aside#sidebar(class="bg-gray-800 text-gray-300 w-64 min-h-screen fixed md:static transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out z-50")
    //- --- CORRECCIÓN: Se añade 'if usuario' para que esta sección solo se muestre si el usuario está logueado ---
    if usuario
    div(class="p-4 border-b border-gray-700")
        p(class="font-bold text-lg text-white truncate")= usuario.nombre
        if usuario.role
            p(class="text-sm text-fuchsia-400")= usuario.role.nombre

    //- Contenedor de enlaces
    nav(class="py-4")
        //- Grupo de Facturación
        div(class="px-4 mb-4")
            p(class="text-xs uppercase text-gray-500 font-bold mb-2") Facturación
            a(href="/mis-actividades" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-receipt w-5 text-center")
                span Actividades
            a(href="/cierre-caja" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-cash-register w-5 text-center")
                span Cierre de Caja

        //- Grupo de Registros
        div(class="px-4 mb-4")
            p(class="text-xs uppercase text-gray-500 font-bold mb-2") Registros
            a(href="/cliente/leer" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-users w-5 text-center")
                span Clientes
            a(href="/personal/leer" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-user-friends w-5 text-center")
                span Personal
            a(href="/proveedor/leer" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-handshake w-5 text-center")
                span Proveedores
            if usuario && usuario.role && usuario.role.nombre === 'Admin'
                a(href="/admin/usuarios" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                    i(class="fas fa-users-cog w-5 text-center")
                    span Usuarios

        //- Grupo de Inventario y Gastos
        div(class="px-4 mb-4")
            p(class="text-xs uppercase text-gray-500 font-bold mb-2") Gestión
            a(href="/articulos/leer" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-box-open w-5 text-center")
                span Inventario
            a(href="/gastos" class="flex items-center gap-3 py-2 px-2 rounded-md hover:bg-gray-700 transition-colors")
                i(class="fas fa-file-invoice w-5 text-center")
                span Gastos