extends ../layout/index

block contenido
    div(class="py-10")
        h1(class="text-3xl md:text-4xl my-10 font-extrabold text-center") Inventario de 
            span(class="font-normal") Ropa
        
        div(class="flex flex-col md:flex-row md:items-center gap-4 mb-8")
            a(href="/inventario/ropa/registrar" class="w-full md:w-auto text-center inline-block bg-fuchsia-500 hover:bg-fuchsia-600 text-white font-bold py-3 px-6 rounded-lg shadow-md mb-4 md:mb-0") + Registrar Nuevo Artículo

            a(href="/ventas/ropa/registrar" class="w-full md:w-auto text-center inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md")
                i(class="fas fa-cash-register mr-2")
                | Registrar Venta

            a(href="/ventas/ropa/historial" class="w-full md:w-auto text-center inline-block bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-md")
                i(class="fas fa-history mr-2")
                | Ver Historial de Ventas
        
        //- --- Formulario de Búsqueda ---
        form(method="GET" action="/inventario/ropa" class="bg-slate-50 border border-slate-200 p-4 rounded-lg shadow-sm mb-8")
            div(class="flex flex-col md:flex-row gap-4 items-end")
                div(class="flex-grow w-full")
                    label(for="busqueda" class="block text-sm font-medium text-gray-700 mb-1") Buscar por Nombre, Marca, Color o Talla
                    input(type="text" name="busqueda" id="busqueda" placeholder="Escribe aquí..." value=busqueda || '' class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-fuchsia-500 focus:border-fuchsia-500")
                
                div(class="flex items-center gap-2 w-full md:w-auto")
                    button(type="submit" class="w-full md:w-auto flex items-center justify-center gap-2 bg-fuchsia-600 hover:bg-fuchsia-700 text-white font-bold px-4 py-2 rounded-lg transition")
                        i(class="fas fa-search")
                        span Buscar
                    a(href="/inventario/ropa" class="w-full md:w-auto flex items-center justify-center gap-2 bg-gray-400 hover:bg-gray-500 text-white font-bold px-4 py-2 rounded-lg transition")
                        i(class="fas fa-undo")
                        span Limpiar

        if !articulos || articulos.length === 0
            p(class="text-center text-gray-500 mt-10") No se encontraron artículos con esos criterios de búsqueda.
        else
            //- En móvil, se convierte en una lista de tarjetas. En escritorio, es una tabla.
            div(class="bg-white shadow rounded-lg")
                table(class="min-w-full leading-normal")
                    //- Encabezado de la tabla (oculto en móvil)
                    thead(class="hidden md:table-header-group")
                        tr
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase") Nombre
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase") Marca / Color / Talla
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase") Stock
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Precio Compra
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Precio Venta
                            th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase") Acciones
                    tbody
                        each articulo in articulos
                            //- Se añade una clase condicional para el fondo si está inactivo
                            tr(class=`block md:table-row mb-4 md:mb-0 border md:border-none rounded-lg shadow-md md:shadow-none ${!articulo.activo ? 'bg-red-50 text-gray-500' : ''}`)
                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right md:text-left")
                                    span(class="md:hidden float-left font-bold text-gray-600") Nombre:
                                    p(class="font-semibold whitespace-no-wrap")
                                        | #{articulo.nombre}
                                        //- Se añade una insignia si está inactivo
                                        if !articulo.activo
                                            span(class="ml-2 px-2 py-1 text-xs font-semibold text-red-800 bg-red-200 rounded-full") Inactivo
                                
                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right md:text-left")
                                    span(class="md:hidden float-left font-bold text-gray-600") Detalles:
                                    div(class="whitespace-no-wrap")
                                        p= `Marca: ${articulo.marca || 'N/A'}`
                                        p= `Color: ${articulo.color || 'N/A'}`
                                        p= `Talla: ${articulo.talla || 'N/A'}`
                                
                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right md:text-center")
                                    span(class="md:hidden float-left font-bold text-gray-600") Stock:
                                    p(class="font-bold whitespace-no-wrap")= articulo.stock_actual
                                
                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right")
                                    span(class="md:hidden float-left font-bold text-gray-600") Precio Compra:
                                    p(class="font-semibold whitespace-no-wrap")= articulo.precio_compra ? `$ ${parseFloat(articulo.precio_compra).toLocaleString('es-CO')}` : '0'
                                                                                

                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right")
                                    span(class="md:hidden float-left font-bold text-gray-600") Precio Venta:
                                    p(class="font-semibold whitespace-no-wrap")= articulo.precio_venta ? `$ ${parseFloat(articulo.precio_venta).toLocaleString('es-CO')}` : '0'
                                
                                td(class="block md:table-cell px-5 py-3 md:py-5 border-b-0 md:border-b")
                                    div(class="flex items-center justify-end md:justify-center gap-x-2")
                                        a(href=`/inventario/ropa/editar/${articulo.id}` class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-1 rounded-md font-semibold text-xs transition-colors") Editar
                                        form(method="POST" action=`/inventario/ropa/eliminar/${articulo.id}` class="form-eliminar")
                                            input(type="hidden" name="_csrf" value=csrfToken)
                                            button(type="submit" class="bg-red-600 hover:bg-red-700 text-white px-4 py-1 rounded-md font-semibold text-xs transition-colors cursor-pointer") Eliminar

            //- Paginación (si existe)
            if totalPaginas > 1
                div(class="mt-8")
                    include ../layout/paginacion