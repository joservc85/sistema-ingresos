extends ../layout/index

block contenido
    div(class="py-10")
        h1(class="text-3xl md:text-4xl my-10 font-extrabold text-center") Reporte de 
            span(class="font-normal") Clientes Frecuentes
        
        div(class="mt-8 mx-auto max-w-4xl px-4")
            //- Formulario para seleccionar el rango de fechas
            form(method="GET" action="/reportes/clientes-frecuentes" class="bg-white p-6 rounded-lg shadow-md mb-8 flex flex-col sm:flex-row items-end gap-4")
                div(class="flex-grow w-full")
                    label(for="fecha_inicio" class="block text-sm font-medium text-gray-700 mb-1") Desde
                    input(type="date" name="fecha_inicio" value=fechaInicio class="w-full px-3 py-2 border border-gray-300 rounded-md")
                div(class="flex-grow w-full")
                    label(for="fecha_fin" class="block text-sm font-medium text-gray-700 mb-1") Hasta
                    input(type="date" name="fecha_fin" value=fechaFin class="w-full px-3 py-2 border border-gray-300 rounded-md")
                button(type="submit" class="w-full sm:w-auto flex-shrink-0 bg-fuchsia-600 text-white px-6 py-2 rounded-md font-bold hover:bg-fuchsia-700") Generar Reporte

            if !reporte || reporte.length === 0
                p(class="text-center text-gray-500 mt-10") No hay datos de ventas de clientes para mostrar en el rango de fechas seleccionado.
            else
                div(class="bg-white shadow rounded-lg overflow-x-auto")
                    table(class="min-w-full leading-normal")
                        //- Encabezado de la tabla (oculto en móvil)
                        thead(class="hidden md:table-header-group")
                            tr
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase") Ranking
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase") Nombre del Cliente
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Total Gastado
                        tbody
                            each item, index in reporte
                                //- Cada fila es una tarjeta en móvil
                                tr(class="block md:table-row mb-4 md:mb-0 border md:border-none rounded-lg")
                                    td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right md:text-center")
                                        span(class="md:hidden float-left font-bold text-gray-600") Ranking:
                                        span(class="font-bold text-lg text-fuchsia-600") ##{index + 1}
                                    td(class="block md:table-cell px-5 py-3 md:py-5 border-b border-gray-200 text-right md:text-left")
                                        span(class="md:hidden float-left font-bold text-gray-600") Cliente:
                                        p(class="text-gray-900 font-semibold whitespace-no-wrap")= item.nombre
                                    td(class="block md:table-cell px-5 py-3 md:py-5 border-b-0 md:border-b border-gray-200 text-right")
                                        span(class="md:hidden float-left font-bold text-gray-600") Total Gastado:
                                        p(class="font-bold text-green-600 whitespace-no-wrap") $#{parseFloat(item.totalGastado).toLocaleString('es-CO')}
