extends ../layout/index

block contenido
    div(class="py-10")
        h1(class="text-3xl md:text-4xl my-10 font-extrabold text-center") Reporte de Rendimiento 
            span(class="font-normal") por Personal
        
        div(class="mt-8 mx-auto max-w-5xl px-4")
            //- Formulario para seleccionar el rango de fechas
            form(method="GET" action="/reportes/por-personal" class="bg-white p-6 rounded-lg shadow-md mb-8 flex flex-col sm:flex-row items-end gap-4")
                div(class="flex-grow w-full")
                    label(for="fecha_inicio" class="block text-sm font-medium text-gray-700 mb-1") Desde
                    input(type="date" name="fecha_inicio" value=fechaInicio class="w-full px-3 py-2 border border-gray-300 rounded-md")
                div(class="flex-grow w-full")
                    label(for="fecha_fin" class="block text-sm font-medium text-gray-700 mb-1") Hasta
                    input(type="date" name="fecha_fin" value=fechaFin class="w-full px-3 py-2 border border-gray-300 rounded-md")
                button(type="submit" class="w-full sm:w-auto flex-shrink-0 bg-fuchsia-600 text-white px-6 py-2 rounded-md font-bold hover:bg-fuchsia-700") Generar Reporte

            if !reporte || reporte.length === 0
                p(class="text-center text-gray-500 mt-10") No hay datos para mostrar en el rango de fechas seleccionado.
            else
                div(class="bg-white shadow rounded-lg overflow-x-auto")
                    table(class="min-w-full leading-normal")
                        //- Encabezado de la tabla (oculto en móvil)
                        thead(class="hidden md:table-header-group")
                            tr
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase") Personal
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase") Servicios Realizados
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Total Facturado
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Ganancia Personal
                                th(class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase") Total Vales
                        tbody
                            each item in reporte
                                //- Cada fila es una tarjeta en móvil
                                tr(class="block md:table-row mb-4 md:mb-0 border md:border-none rounded-lg")
                                    td(class="block md:table-cell p-3 text-right md:text-left border-b md:border-b-0")
                                        span(class="md:hidden float-left font-bold text-gray-600") Personal:
                                        p(class="text-gray-900 font-semibold whitespace-no-wrap")= `${item.personal.nombre} ${item.personal.apellidos}`
                                    td(class="block md:table-cell p-3 text-right md:text-center border-b md:border-b-0")
                                        span(class="md:hidden float-left font-bold text-gray-600") Servicios:
                                        p(class="text-gray-900 whitespace-no-wrap")= item.totalServicios
                                    td(class="block md:table-cell p-3 text-right border-b md:border-b-0")
                                        span(class="md:hidden float-left font-bold text-gray-600") Facturado:
                                        p(class="text-gray-900 font-semibold whitespace-no-wrap") $#{parseFloat(item.totalFacturado).toLocaleString('es-CO')}
                                    td(class="block md:table-cell p-3 text-right border-b md:border-b-0")
                                        span(class="md:hidden float-left font-bold text-gray-600") Ganancia:
                                        p(class="text-green-600 font-bold whitespace-no-wrap") $#{parseFloat(item.gananciaPersonal).toLocaleString('es-CO')}
                                    td(class="block md:table-cell p-3 text-right")
                                        span(class="md:hidden float-left font-bold text-gray-600") Vales:
                                        p(class="text-red-600 font-semibold whitespace-no-wrap") -$#{parseFloat(item.totalVales || 0).toLocaleString('es-CO')}

                //- Paginación
                if totalPaginas > 1
                    div(class="mt-8")
                        include ../layout/paginacion